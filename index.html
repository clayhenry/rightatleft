<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Page Title</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://fonts.googleapis.com/css?family=Barlow:400,700,900|Roboto" rel="stylesheet">

</head>

<body style="overflow-x: hidden">

    <style>

        h1 {
            font-family: 'Barlow', sans-serif;
            font-weight: bold;
            font-size: 48px;
            padding: 0;
            margin: 0;
        }

        p {

            font-family: 'Roboto', sans-serif;
        }
        .sizemeup {
            transition: width 0.4s, height 0.4s;
            position: absolute;
            bottom: 0;
            /* overflow: hidden; */
        }
        
        #container {
            width: 100%;
            height: 100%;
            left: 0;
            top: 0;
            position: fixed;
        }
        
        #cont {
            position: absolute;
            top: 6780px;
        }
        
        .contents {
            position: fixed;
            width: 100%;
            top: 0;
            height: 100%;
        }
        
        .content {
            width: 100%;
            text-align: left;
            background-color: aquamarine;
            justify-content: normal;
            position: absolute;
        }
        
        .content.second {
            color: white;
        }
        

        /* The element to apply the animation to */
        
        .animate1 {
            background-color: red;
            animation-name: example;
            animation-duration: 1s;
            animation-delay: 0.5s;
            animation-fill-mode: forwards;
        }

               #img, #img2 {
        
        transform-origin: center center 0px; 
        transition: all 0.2s ease 0s;
    }

    #intro1 {margin:15%;max-width: 800px;min-width: 200px;position: relative;top: 10p;}
    
    
    
    @keyframes intotext {
            from { top: 45px; }
            to {  top: 0px;}
        }

    @keyframes intotext2 {
            from { top: -48px; }
            to {  top: 0px;}
        }


    @keyframes intopargraph {
            from {transform: rotate3d(1, -1, 0, 30deg); opacity: 0 }
            to {  transform: rotate3d(0, 0, 0, 0deg); opacity: 1  }
        }
    #h1-intro1 {
        clip-path: inset(0% 0 0 0);
        background-color: white;
        position: relative;
    }

    #h1-intro2 {
        clip-path: inset(0% 0 0 0);
        background-color:white;
        position: relative;
    }

    #h1-intro1 h1 {
       
         position: relative;
         animation-name: intotext;
         animation-duration: 0.5s;
    }
    #h1-intro2 h1 {
        top: -48px;
        position: relative;
        animation-name: intotext2;
        animation-duration: 0.5s;
        animation-delay: 0.2s;
        animation-fill-mode: forwards;
  }

  #hp-intro1 {
      transform: rotate3d(1, -1, 0, 30deg);
      opacity: 0;
      animation-name: intopargraph;
      animation-duration: 0.5s;
      animation-delay: 0.5s;
      animation-fill-mode: forwards;
  }



    </style>

    <div id="container">
        <div id="default" class="sizemeup" style="background: white; width:100%; height: 0px; overflow: visible">
            <div class="contents">
                <div id="intro1">
                    <div id="h1-intro1"><h1>The standard Lorem Ipsum passage</h1></div>
                    <div id="h1-intro2"><h1> used since the 1500s</h1></div>

    <div id="hp-intro1"><p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p></div>
</div>
            </div>

            <div class="sizemeup" style="background: #161616; width:100%; height: 150px; bottom: 0;  overflow:hidden;">
                <div class="contents into" style="position: relative">
                    <div style="padding:10px; margin:15%"> <h1 style="color: white" >Sed do eiusmod tempor incididunt ut labore et dolore </h1>
                        <div  style=" width:200px; height: 150px;" >
                            <div id="img" style="width:100%; " ><img src="image.jpg"  style="width:100%; position: absolute;" >  Hello </div> 
                            <div id="img2" style="width:100%;"> <img src="image.jpg" style="width:50%; position: absolute; right: -20px; top:-30px">  Hello </div> 
                        </div>
                    </div>
                </div>

                <div class="sizemeup" style="background: #e7e7e5; width:100%; height: 0px; ">
                    <div class="contents" style="position: relative">three</div>

                    <div id="three" class="sizemeup" style="background: #9f884f; width:100%; height: 0px; ">
                        <div class="contents" style="position: relative">four</div>

                    </div>


                </div>
            </div>
        </div>
    </div>


    <div style="height:8000px">

    </div>

    <script>
        //always start from top
        setTimeout(function() {
            window.scrollTo(0, 0)
        }, 200)

        let sizeupelems = document.querySelectorAll(".sizemeup");
        let container = document.getElementById("container");
        let currentContentsValues = document.querySelectorAll(".contents")
        let contunueContent = document.querySelector("#cont");
        let intoContainer = document.getElementById("intro1");
        let scrollDirection = ""
        let scrollEvents = 0;
        let instanceCounts = 0
        let currentOffset = window.pageYOffset;
   

        sizeup = () => {

            let h = sizeupelems[instanceCounts].clientHeight
            let w = sizeupelems[instanceCounts].clientWidth

            let contentCont = sizeupelems[instanceCounts].querySelector(".contents");

            // for (let i = 0; i < currentContentsValues.length; i++) {
            //     currentContentsValues[i].style.display = "none";
            // }

            // if (contentCont.style.display == "none") {
            //     contentCont.style.display = "block"

            // }

            if (scrollDirection == "down") {
                sizeupelems[instanceCounts].style.height = (window.innerHeight) + "px";

                if (typeof sizeupelems[instanceCounts + 1] != "undefined") {
                    sizeupelems[instanceCounts + 1].style.height = (150) + "px";
                }
                // sizeupelems[instanceCounts].style.width = (window.innerWidth) + "px";
                // sizeupelems[1].style.clipPath = "circle(40% at center)"
            }

            if (scrollDirection == "up") {

                let downIndex = instanceCounts + 1;

                if (typeof(sizeupelems[downIndex]) != "undefined") {
                    sizeupelems[downIndex].style.height = "150px";
                    if (typeof sizeupelems[downIndex + 1] != "undefined") {
                        sizeupelems[downIndex + 1].style.height = "0px"
                    };
                    // sizeupelems[1].style.clipPath = "circle(40% at center)"
                }
            }
        }

        sizeup();

        document.addEventListener("scroll", (e) => {

            let scroll = window.pageYOffset;

            if (scroll <= 0) {
                evcount = 0;
                instanceCounts = 0;
            }
            if (scroll > currentOffset) {
                scrollDirection = "down";
                scrollEvents++;
            } else {
                scrollDirection = "up";
                scrollEvents--;
            }
            if (instanceCounts <= sizeupelems.length && window.pageYOffset < 6000) {

                currentOffset = window.pageYOffset;
                container.style.position = "fixed"
                container.style.top = 0;
                container.style.left = 0;

                intoContainer.style.top = - window.pageYOffset / 5 + "px"
                
                //first frame
                if (currentOffset >= 80 && currentOffset <= 200) {
                    instanceCounts = 0;
            ;
                }

                //second frame
                if (currentOffset >= 199 && currentOffset <= 1999) {

                   // currentContentsValues[1].style.top = ( - window.pageYOffset / 10) + "px";
                    instanceCounts = 1;
                }
                //third frame
                if (currentOffset >= 2000 && currentOffset <= 3700) {
                    currentContentsValues[2].style.top = (- window.pageYOffset / 10) + "px";
                    instanceCounts = 2;
                }

                //last frame
                if (currentOffset >= 3701) {
                    currentContentsValues[3].style.top = (- window.pageYOffset / 10) + "px";
                    instanceCounts = 3;
                    container.style.position = "absolute"
                    container.style.top = window.pageYOffset + "px";
                    currentContentsValues[3].style.position = "absolute"
                }

                sizeup()
            }

        })


        //rotation

 
    var oldX = 0;
    var oldY = 0;
    var c = 0;
    var v = 1
    let deg = 0;
    let direction = 0;
    let middle = 0;
    let updown = "";
    let leftright = "";
    let pos = "";
    let rot = "";


        let img = document.getElementById("img");
        let img2 =  document.getElementById("img2");


        document.addEventListener("mouseleave", ()=>{

        img.style.transform = `rotate3d(1, 1, 0, -20deg)`
        img2.style.transform =  `rotate3d(1, 1, 0, -15deg)`
        
        })

        document.addEventListener("mousemove", (event)=>{
        
       
     
        var x = (Math.floor(event.clientX / 30 )); 
        var cWidth = window.innerWidth / 30    
        var y = (Math.floor(event.clientY / 20)); 
        var cHeight = window.innerHeight / 30
   
            

        if( (oldY <= event.pageY  || oldY >= event.pageY) && (oldX == event.pageX) ){
           
            direction = 1;
            console.log("UD")
           


        } if((oldX <= event.pageX || oldX >= event.pageX ) && (oldY == event.pageY) ) {
           direction = 0;
    
           console.log("LR")
        }


     oldX = event.offsetX;
        oldY = event.pageY;

        if(direction == 1){
            middle = Math.floor(cHeight/2);
            deg = y;

        } else {
            middle = Math.floor(cWidth/2);
            deg = x;
        }

        if(deg < middle){

            c = middle - deg;   
            deg = middle + c;
            updown ="+";
    
        } else {
            updown ="-";
        }
    
        rot = `rotate3d(${v}, ${updown}${v}, 0, ${deg}deg)`;
        // console.log( event.offsetX)

        img.style.transform = rot;
        img2.style.transform =  `rotate3d(${v}, ${updown}${v}, 0, ${deg - 5}deg)`

    })


//animate h1


    </script>

</body>

</html>